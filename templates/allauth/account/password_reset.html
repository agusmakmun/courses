{% extends "allauth/account/base.html" %}
{% load static i18n %}
{% load account %}

{% block head_title %}{% trans "Password Reset" %}{% endblock %}

{% block content %}
  <form class="form-center" method="post" action="{% url 'account_reset_password' %}">{% csrf_token %}
    <div class="text-center mb-3">
      <a href="/">
        <img class="mb-4" src="{% static 'images/large-logo-orange.png' %}" alt="" width="72" height="72">
      </a>
      <h1 class="h6 mb-3 font-weight-bold">{% trans "Password Reset" %}</h1>
      <p>{% blocktrans %}Please contact us if you have any trouble resetting your password.{% endblocktrans %}</p>

      {% if user.is_authenticated %}
        {% include "account/snippets/already_logged_in.html" %}
      {% endif %}

      {% if form.non_field_errors %}
        <div class="non-field-errors text-sm text-red">
          {% for err in form.non_field_errors %}
            <span class="form-error">{{ err }}</span>{% if not forloop.last %}<br />{% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <div class="form-group form-label-group">
      {{ form.email }}
      <label for="inputUsername">{% trans 'Email' %}</label>
      {% if form.email.errors %}
        <div class="invalid-feedback" style="display:block">
          {% for error in form.email.errors %}
            {{ error }}{% if not forloop.last %}<br />{% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <div class="form-captcha mb-3">
      <div class="d-flex justify-content-center">
        {{ form.captcha }}
      </div>
      {% if form.captcha.errors %}
        <div class="text-center invalid-feedback" style="display:block">
          {% for error in form.captcha.errors %}
            {{ error }}{% if not forloop.last %}<br />{% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>

    <div style="padding:0 70px">
      <button class="btn bg-gradient-primary btn-block" type="submit">{% trans "Reset My Password" %}</button>
    </div>

    <div class="mt-3 mb-3 text-muted text-center">
      <p>&larr; {% blocktrans %}<a href="/">Go back</a>{% endblocktrans %}</p>
    </div>
  </form>
{% endblock %}


{% block js %}
  <script>
    $('input[type="email"]').attr('class', 'form-control');
  </script>
{% endblock %}
